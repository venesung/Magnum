<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>기본정보관리_변경 - 삼성카드</title>
	<base href="http://www.samsungcard.com" />
<link rel="stylesheet" type="text/css" href="/css/base_al.css" />
<link rel="stylesheet" type="text/css" href="/css/al.css" />
<script type="text/javascript" src="/js/al/common-hp-al.js"></script>
<script type="text/javascript" src="/js/common-hp.js"></script>
<script type="text/javascript" src="/js/common-hp-validation.js"></script>
<script type="text/javascript" src="/js/common-hp-util.js"></script>
<script type="text/javascript" src="/js/common.js"></script>

<script type="text/javascript">
	function goCheck(){
		var frame = document.frm;
		if(validation()){
			
			frame.action="/chaininfo.do?method=updateChainPassword2";
            frame.onSubmit='this.submit();';
			//frame.submit();
            frm.submit();
		}
	}
	
	function validation() {
		var frame = document.frm;
		if(
			checkString(frame.password, "기존 웹 비밀번호를") &&
			checkLength(frame.password, "기존 웹 비밀번호를",6) &&
			checkIDHan(frame.password, "기존 웹 비밀번호를") &&
			checkString(frame.newPassword, "새로운 웹 비밀번호를") &&
			checkLength(frame.newPassword, "새로운 웹 비밀번호를",6) &&
			checkIDHan(frame.newPassword, "새로운 웹 비밀번호를") &&
			checkString(frame.newPasswordRe, "새로운 웹 비밀번호를") &&		
			checkLength(frame.newPasswordRe, "새로운 웹 비밀번호를",6) &&		
			checkIDHan(frame.newPasswordRe, "새로운 웹 비밀번호를") &&
	        checkpasswd() ){
	        return true;
		}
		else{
			return false;
		}
		
	}

	function checkpasswd(){
		
		var passwordVal  = self.document.frm.password.value;
		var newPasswordVal = self.document.frm.newPassword.value;
		var newPasswordReVal = self.document.frm.newPasswordRe.value;

		if(/[0-9]+/.test(newPasswordVal) == false ){
			alert("영문과 숫자를 혼용하여 주십시오.");
			document.frm.newPassword.focus();
			return;
		}
		if(/[a-zA-Z]+/.test(newPasswordVal) == false ){
			alert("영문과 숫자를 혼용하여 주십시오.");
			document.frm.newPassword.focus();
			return;
		}
		if(/[\s]+/.test(newPasswordVal) == true){		
			alert("빈칸이 있습니다.");
			document.frm.newPassword.focus();
			return;
		}

		
		if ( passwordVal == newPasswordVal || passwordVal == newPasswordReVal){
			alert("새로운 비밀번호와 기존 비밀번호는 같지 않아야 합니다. 다시 확인하고 입력해 주십시요 ");	
				return false;
		}  
		if  (newPasswordVal != newPasswordReVal ){
			alert("새로운 비밀번호와 확인 비밀번호는 같아야 합니다. 다시 확인하고 입력해 주십시요 ");	
				return false;
		} 
		if (passChk(newPasswordVal)){
			return true;
		}else{
			return false;
		}		
	}
	function checkLength ( theField, s, Length)  {
		if (theField.value.length < Length  )
		{
	        theField.focus();
	        theField.select();
	        alert( Length+"글자 이상이어야 합니다.");
			return false;
		}
	    return true;
	}

	function checkEnter(){
		if (event.keyCode==13)
		{
			validation(self.document.frm);
		} 
	}
	function  passChk(p_pass)
	{
	    obj = p_pass;
		var cnt=0,cnt2=1,cnt3=1;
		var temp="";
		for(i=0;i < p_pass.length;i++){
			temp_pass1 = p_pass.charAt(i);
			next_pass = (parseInt(temp_pass1.charCodeAt(0)))+1;
			temp_p = p_pass.charAt(i+1);
			temp_pass2 = (parseInt(temp_p.charCodeAt(0)));
			if (temp_pass2 == next_pass)
			    cnt2 = cnt2 + 1;
			else
			    cnt2 = 1;
			if (temp_pass1 == temp_p)
			    cnt3 = cnt3 + 1;
			else
			    cnt3 = 1;
			if (cnt2 > 3) break;
			if (cnt3 > 3) break;
		}
		if (cnt2 > 3){
			alert("비밀번호에 연속된 글이나 순차적인 숫자를 4개이상 사용해서는 안됩니다.");
			return  false;
		}
		if (cnt3 > 3){
			alert("비밀번호에 반복된 문자/숫자를 4개이상 사용해서는 안됩니다.");
			return  false;
		}
		
		return true;
	}

</script>

</head>
<body>
<form name="xecure"><input type="hidden" name="p" /></form>

<div class="accessbility"><a href="#content">본문 바로가기</a></div>

<div id="wrap">
	<!-- header -->
	<fileTag:alTopMenuView topMenuGubun="2"/>

	<div id="con_wrap" class="clfix">
		<!-- left -->
		<fileTag:alLeftMenuView leftMenuGubun="2" leftOrderGubun="2" />
		
		<div id="content">
			<!-- top_visual -->
			<div class="top_visual">
				<div id="location">가맹점 정보&nbsp;&gt;&nbsp;기본정보관리_변경</div>
				<h1><img src="/images/al/h1_change_psw.png" alt="가맹점 비밀번호변경" /></h1><!-- 100415 -->
				<p class="ab_br"><img src="/images/al/img_affl_m.jpg" alt="" /></p><!-- 100413 -->
			</div>

			<!-- content_block -->
			<div class="content_block">
				<div class="content_block_inner">
					<h2 class="pb10"><img src="/images/al/h2_pw_change.png" alt="비밀번호 변경" /></h2>
					<p class="mb20 t_black">비밀번호 변경 후, 다시 로그인 후 사이트를 이용해 주세요.</p>
					<table class="dtable02 dtable_service mb20" summary="기존아이디를 보여주는 게시판입니다.">
					<caption>기존아이디</caption>
					<colgroup><col width="115" /><col width="*" /></colgroup>
					<tbody>
						<tr>
							<th scope="row"><p>아이디</p></th>
							<td><p><strong class="t_black">${userId }</strong></p></td>
						</tr>
					</tbody>
					</table>
					<form class="sevice_write" action="" name="frm" method="post" autocomplete="off">
						<div>
							<label for="label_pw" class="t_11 t_gray">기존비밀번호</label>
							<span class="bg_input"><input type="password" title="기존비밀번호" id="label_pw" style="width:187px" name="password" maxlength="12" /><em>&nbsp;</em></span>
						</div>
						<div>
							<label for="label_newpw" class="t_11 t_gray">새비밀번호</label>
							<span class="bg_input"><input type="password" title="새비밀번호" id="label_newpw" style="width:187px" name="newPassword" maxlength="12" /><em>&nbsp;</em></span>
						</div>
						<div>
							<label for="label_newpw_re" class="t_11 t_gray">새비밀번호 확인</label>
							<span class="bg_input"><input type="password" title="새비밀번호 확인" id="label_newpw_re" style="width:187px" name="newPasswordRe" maxlength="12" /><em>&nbsp;</em></span>
						</div>
					</form>
					
					<!-- 100107 -->
					<div class="btnset txt_pw">
						<p class="btnl t_desc04">새로운 비밀번호는 영문자, 숫자, 영문+숫자 혼용하여 6~12자리로 입력해 주세요.</p>
						<p class="btnr">
                            <a href="javascript:goCheck();" class="btn btn_blue"><span>확인</span></a>
                        <a href="javascript:document.frm.reset();" class="btn btn_white"><span>취소</span></a>
						</p>
					</div>
					<!-- //100107 -->
					
				</div>
			</div>
		</div>
	</div>
	<!-- footer -->
	<jsp:include page="/WEB-INF/jsp/hp/al/NHPALFOOTER.jsp" flush="false"></jsp:include>
</div>
</body>
</html>
